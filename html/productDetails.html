<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi tiết sản phẩm</title>
    <link rel="stylesheet" href="../css/customCSS/all.css">
    <link rel="stylesheet" href="../css/fontawesome/fontawesomepro6.4.2.css">
    <link rel="stylesheet" href="../css/bootstrap/bootstrap.css">
    <link href='https://fonts.googleapis.com/css?family=Inter' rel='stylesheet'>
    <link rel="stylesheet" href="../css/customCSS/productDetails.css">
    <script src="../js/fontawesome6.7.2.js"></script>

</head>

<body>
    <div class="container-fluid p-0">
        <header>
            <a href="../html/home.html"><img class="logo" src="../img/logo-banner/logo.webp" alt="Logo"></a>
            <form action="#">
                <input type="text" name="search" id="search" placeholder="Tìm kiếm sản phẩm ...">
                <button type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
            </form>
            <div class="header-right">
                <div class="call">
                    <i class="fa-solid fa-phone-volume" style="color: #ffffff;"></i>
                    <a href="#">
                        <small>Gọi mua hàng</small><br>
                        <small>1900 1234</small>
                    </a>
                </div>
                <div class="login">
                    <i class="fa-regular fa-user"></i>
                    <span>
                        <a href="#"><small>Tài khoản</small></a><br>
                        <a href="../html/login.html"><small>Đăng nhập</small></a>
                    </span>
                </div>
                <a href="../html/cart.html" class="cart-wrapper">
                    <div class="cart" id="cart">
                        <i class="fa-solid fa-cart-shopping"></i>
                        <small>Giỏ hàng</small>
                    </div>
                </a>
            </div>
        </header>
        <nav>
            <ul>
                <li>
                    <i class="fa-solid fa-list"></i> DANH MỤC SẢN PHẨM
                    <ul class="submenu">
                        <li><a href="../html/productList.html?category=cameras">Máy ảnh</a></li>
                        <li><a href="../html/productList.html?category=lenses">Ống kính</a></li>
                        <li><a href="../html/productList.html?category=camcorders">Máy quay phim</a></li>
                        <li><a href="../html/productList.html?category=accessories">Phụ kiện máy ảnh</a></li>
                        <li><a href="../html/productList.html?category=drone">Drone</a></li>
                    </ul>
                </li>
                <li><a href="../html/home.html">Trang chủ</a></li>
                <li><a href="../html/introduction.html">Giới thiệu</a></li>
                <li>
                    <a href="../html/productList.html">Sản phẩm</a>
                    <ul class="submenu-products">
                        <li><a href="../html/productList.html?category=new">Sản phẩm mới</a></li>
                        <li><a href="../html/productList.html?category=featured">Sản phẩm nổi bật</a></li>
                    </ul>
                </li>
                <li><a href="../html/contact.html">Liên hệ</a></li>
            </ul>
        </nav>
        <div id="product-details" class="product-detail-wrapper"></div>
        <footer>
            <div class="footer-wrapper">
                <div class="footer-info">
                    <div class="footer-logo">
                        <img src="../img/logo-banner/logo-footer.webp" alt="Logo">
                    </div>
                    <div class="item">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M4.58867 13.1879C2.56119 12.5189 2.44466 9.69477 4.41012 8.86094L17.7759 3.19061C19.691 2.37814 21.6219 4.30899 20.8094 6.22409L15.1391 19.5899C14.3052 21.5553 11.4811 21.4388 10.8121 19.4113L9.26792 14.7321L4.58867 13.1879Z"
                                stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        <p>Địa chỉ</p>
                    </div>
                    <div class="item">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M6.42459 3.23775C7.51203 2.76707 8.77662 3.00825 9.61449 3.84612L9.9591 4.19073C11.0636 5.29519 11.3313 6.98519 10.6223 8.37694L9.97022 9.65693C9.58386 10.4153 9.72975 11.3363 10.3316 11.9381L12.0619 13.6684C12.6637 14.2702 13.5847 14.4161 14.3431 14.0298L15.6231 13.3777C17.0148 12.6687 18.7048 12.9364 19.8093 14.0409L20.1539 14.3855C20.9918 15.2234 21.2329 16.488 20.7623 17.5754C19.4986 20.4948 16.2974 21.9789 13.6038 20.2867C11.9845 19.2694 10.0931 17.8454 8.12386 15.8761C6.15459 13.9069 4.73063 12.0155 3.71332 10.3962C2.02107 7.70255 3.50523 4.50135 6.42459 3.23775Z"
                                stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        <p>1900 xxxx</p>
                    </div>
                    <div class="item">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M4 6.35418C4.73294 5.52375 5.80531 5 7 5H17C18.0144 5 18.9407 5.37764 19.6458 6M4 6.35418C3.37764 7.05931 3 7.98555 3 9V15C3 17.2091 4.79086 19 7 19H17C19.2091 19 21 17.2091 21 15V9C21 7.80531 20.4762 6.73294 19.6458 6M4 6.35418L12 13L19.6458 6"
                                stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        <p>support@example.com</p>
                    </div>
                </div>
                <div class="footer-about">
                    <div class="footer-about-title">
                        VỀ CHÚNG TÔI
                    </div>
                    <ul>
                        <li><a href="../html/home.html">Trang chủ</a></li>
                        <li><a href="../html/introduction.html">Giới thiệu</a></li>
                        <li><a href="../html/allProducts.html">Sản phẩm</a></li>
                        <li><a href="../html/contact.html">Liên hệ</a></li>
                    </ul>
                </div>
                <div class="footer-policy">
                    <div class="footer-about-title">
                        CHÍNH SÁCH
                    </div>
                    <ul>
                        <li><a href="#">Chính sách giao hàng</a></li>
                        <li><a href="#">Chính sách đổi trả</a></li>
                        <li><a href="#">Chính sách bán hàng</a></li>
                        <li><a href="#">Hướng dẫn trả góp</a></li>
                    </ul>
                </div>
                <div class="footer-advise-payment-wrapper">
                    <div class="footer-advise">
                        <div class="footer-advise-title">
                            TƯ VẤN KHÁCH HÀNG
                        </div>
                        <ul>
                            <li><a href="#">Mua hàng: 1900 6750</a></li>
                            <li><a href="#">Khiếu nại: 1900 6750</a></li>
                            <li><a href="#">Bảo hành: 1900 6750</a></li>
                        </ul>
                    </div>
                    <div class="footer-payment">
                        <div class="footer-payment-title">
                            PHƯƠNG THỨC THANH TOÁN
                        </div>
                        <div class="footer-payment-list">
                            <img src="../img/payment/icon_payment_1.webp" alt="Payment">
                            <img src="../img/payment/icon_payment_2.webp" alt="Payment">
                            <img src="../img/payment/icon_payment_3.webp" alt="Payment">
                            <img src="../img/payment/icon_payment_4.webp" alt="Payment">
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>
    <script src="../js/defineListProducts.js"></script>
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script>
        //Hàm lấy thông tin sản phẩm đã lưu trong localStorage
        function loadProductDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const productTitle = urlParams.get('product');
            const productData = JSON.parse(localStorage.getItem('selectedProduct')) || {};

            const productDetails = document.getElementById('product-details');

            if (!productTitle || !productData || productData.title !== decodeURIComponent(productTitle)) {
                productDetails.innerHTML = `
                    <div class="error-message">
                        <h2>Sản phẩm không tồn tại hoặc thông tin không hợp lệ</h2>
                    </div>
                `;
                return;
            }

            productDetails.innerHTML = `
                <div class="product-detail-img">
                    <img src="${productData.imageSrc}" alt="${productData.title}">
                </div>
                <div class="product-detail-info">
                    <h1>${productData.title}</h1>
                    <small class="brand">Thương hiệu: <b>Đang cập nhật</b></small>
                    <div class="product-detail-price">
                        <span class="product-detail-price">${productData.price}</span>
                        ${productData.comparePrice ?
                    `<span class="product-detail-compare-price">${productData.comparePrice}</span>` : ''}
                    </div>
                    <small class="vat">Giá đã bao gồm VAT</small>
                    <div class="quantity">Số lượng: <input type="number" class="form-control" value="1" id="quantity"></div>
                    <button class="btn btn-danger w-100">MUA NGAY</button>
                    <div class="button-group">
                        <button class="btn btn-primary w-50" id="cartBtn">THÊM VÀO GIỎ HÀNG</button>
                        <button class="btn btn-primary w-50">TRẢ GÓP</button>
                    </div>
                    <div class="promotion">
                        <div class="promotion-title">
                            <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21" fill="none">
                                <path
                                    d="M1.3125 11.026V19.3155C1.3125 20.0782 1.90181 20.6971 2.625 20.6971H9.1875V11.026H1.3125Z"
                                    fill="#D23535"></path>
                                <path
                                    d="M19.6875 5.49972H15.5348C15.8327 5.28557 16.0886 5.07281 16.2671 4.88215C17.3263 3.76169 17.3263 1.93801 16.2671 0.81755C15.2381 -0.273898 13.4453 -0.271134 12.4176 0.81755C11.8479 1.41854 10.3386 3.86531 10.5473 5.49972H10.4528C10.6601 3.86531 9.15075 1.41854 8.58244 0.81755C7.55344 -0.271134 5.76056 -0.271134 4.73287 0.81755C3.675 1.93801 3.675 3.76169 4.73156 4.88215C4.91138 5.07281 5.16731 5.28557 5.46525 5.49972H1.3125C0.589312 5.49972 0 6.12005 0 6.8813V8.95367C0 9.33498 0.294 9.64446 0.65625 9.64446H9.1875V6.8813H11.8125V9.64446H20.3438C20.706 9.64446 21 9.33498 21 8.95367V6.8813C21 6.12005 20.412 5.49972 19.6875 5.49972ZM9.11006 5.45413C9.11006 5.45413 9.05494 5.49972 8.86725 5.49972C7.96031 5.49972 6.22913 4.50775 5.66344 3.90814C5.1135 3.32511 5.1135 2.37459 5.66344 1.79156C5.92987 1.50972 6.28294 1.35498 6.65831 1.35498C7.03237 1.35498 7.38544 1.50972 7.65188 1.79156C8.5365 2.72827 9.41588 5.12117 9.11006 5.45413ZM12.1314 5.49972C11.9451 5.49972 11.8899 5.45551 11.8899 5.45413C11.5841 5.12117 12.4635 2.72827 13.3481 1.79156C13.8771 1.22926 14.8024 1.2265 15.3366 1.79156C15.8878 2.37459 15.8878 3.32511 15.3366 3.90814C14.7709 4.50775 13.0397 5.49972 12.1314 5.49972Z"
                                    fill="#D23535"></path>
                                <path
                                    d="M11.8125 11.026V20.6971H18.375C19.0995 20.6971 19.6875 20.0782 19.6875 19.3155V11.026H11.8125Z"
                                    fill="#D23535"></path>
                            </svg>
                            KHUYẾN MÃI
                        </div>
                        <div class="promotion-list">
                            <ul>
                                <li>Nhập mã LOFI thêm 5% đơn hàng</li>
                                <li>Giảm giá 10% khi mua từ sản phẩm thứ 2</li>
                                <li>Tặng phiếu mua hàng khi mua từ 1000k</li>
                                <li>Đổi trả hàng trong vòng 30 ngày</li>
                            </ul>
                        </div>
                    </div>                
                </div>
            `;

            const addToCartBtn = productDetails.querySelector('#cartBtn');
            addToCartBtn.addEventListener('click', () => {
                const quantity = parseInt(document.getElementById('quantity').value);
                const product = {
                    name: productData.title,
                    image: productData.imageSrc,
                    price: productData.price,
                    comparePrice: productData.comparePrice,
                    quantity: quantity
                };
                addToCart(product);
            });
        }
        //Thêm sản phẩm vào giỏ hàng
        function addToCart(product) {
            try {
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                const existing = cart.find(item => item.name === product.name);
                if (existing) {
                    existing.quantity += product.quantity;
                } else {
                    cart.push(product);
                }
                localStorage.setItem('cart', JSON.stringify(cart));

                const notification = document.createElement('div');
                notification.className = 'cart-notification';
                notification.innerHTML = `
                    <div class="notification-content">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5 13L9 17L19 7" stroke="#00C4B4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="12" cy="12" r="10" stroke="#00C4B4" stroke-width="2"/>
                        </svg>
                        <p>Sản phẩm đã được thêm vào Giỏ hàng</p>
                    </div>
                `;
                document.body.appendChild(notification);
                setTimeout(() => {
                    notification.remove();
                }, 2000);
            } catch (error) {
                console.error("Lỗi khi thêm vào giỏ hàng:", error);
            }
        }

        // Load product details when the page loads
        window.onload = () => {
            loadProductDetails();
        };

    </script>
</body>

</html>